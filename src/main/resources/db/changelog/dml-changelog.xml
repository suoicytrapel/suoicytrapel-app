<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">
         
	<changeSet author="msingla" id="1.1">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">select count(*) from city where name = 'Bikaner';</sqlCheck>
		</preConditions>
	    <sql>insert into city values ((select nextVal('hibernate_sequence')), 'Bikaner', 'Rajasthan', now());</sql>
    </changeSet>
    
    <changeSet author="msingla" id="1.2">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">select count(*) from venue where name = 'Bahia Resort';</sqlCheck>
		</preConditions>
	    <sql>insert into venue (id, name, description, type, comments, rating, added_on, city_id) values ((select nextval('hibernate_sequence')), 'Bahia Resort', 'descript', 'PALACE', null, null, now(), (select id from city where name = 'Bikaner'));</sql>
    </changeSet>
    
    <changeSet author="msingla" id="1.3">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">select count(*) from amenities where amenity_type = 'BNQTHALL' and description = 'Banquet Hall';</sqlCheck>
		</preConditions>
	    <sql>insert into amenities values ((select nextVal('hibernate_sequence')), 'BNQTHALL', 'Banquet Hall', true, '25in x 25in x 25in', now());</sql>
    </changeSet>
    
    <changeSet author="msingla" id="1.4">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">select count(*) from service where service_type = 'DINEIN' and description = 'Dine In';</sqlCheck>
		</preConditions>
	    <sql>insert into service values ((select nextVal('hibernate_sequence')), 'DINEIN', 'Dine In', now());</sql>
    </changeSet>
    
    <changeSet author="msingla" id="1.5">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">select count(*) from room where room_type = 'STANDARD';</sqlCheck>
		</preConditions>
	    <sql>insert into room values ((select nextVal('hibernate_sequence')), 'STANDARD', 'Standard Room', '15in X 15in X 15in', now());</sql>
    </changeSet>
    
    <changeSet author="msingla" id="1.6">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">select count(*) from room where room_type = 'DELUXE';</sqlCheck>
		</preConditions>
	    <sql>insert into room values ((select nextVal('hibernate_sequence')), 'DELUXE', 'Deluxe Room', '15in X 15in X 15in', now());</sql>
    </changeSet>
    
    <changeSet author="msingla" id="1.7">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">select count(*) from room where room_type = 'SUPERDELUXE';</sqlCheck>
		</preConditions>
	    <sql>insert into room values ((select nextVal('hibernate_sequence')), 'SUPERDELUXE', 'Super Deluxe Room', '15in X 15in X 15in', now());</sql>
    </changeSet>
    
    <changeSet author="msingla" id="1.8">
		<!-- <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">select count(*) from city where name = 'Bikaner'</sqlCheck>
		</preConditions> -->
	    <sql>insert into address values ((select nextVal('hibernate_sequence')), 'Addr Line 1', 'Addr Line 2', 'Bikaner', 'Rajasthan', 151001, 9876543210, 9876556789, 'msinla@gmail.com', (select id from venue where name = 'Bahia Resort'), 0, now());</sql>
    </changeSet>
    
    <changeSet author="msingla" id="1.9">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">select count(*) from attachment where name = 'ImageURl';</sqlCheck>
		</preConditions>
	    <sql>insert into attachment values ((select nextVal('hibernate_sequence')), 'Attachment1', 'ImageURl', (select id from venue where name = 'Bahia Resort'), 0, now());</sql>
    </changeSet>
    
    <changeSet author="msingla" id="1.10">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">select count(*) from venue_rooms where venue_id = (select id from venue where name = 'Bahia Resort') and room_id = (select id from room where room_type = 'STANDARD');</sqlCheck>
		</preConditions>
	    <sql>insert into venue_rooms values ((select nextVal('hibernate_sequence')),(select id from venue where name = 'Bahia Resort'), (select id from room where room_type = 'STANDARD'), null, true, true, true, true, true, 0, now());</sql>
    </changeSet>
    
    <changeSet author="msingla" id="1.11">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">select count(*) from venue_rooms where venue_id = (select id from venue where name = 'Bahia Resort') and room_id = (select id from room where room_type = 'DELUXE');</sqlCheck>
		</preConditions>
	    <sql>insert into venue_rooms values ((select nextVal('hibernate_sequence')),(select id from venue where name = 'Bahia Resort'), (select id from room where room_type = 'DELUXE'), null, true, true, true, true, true, 0, now());</sql>
    </changeSet>
    
    <changeSet author="msingla" id="1.12">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">select count(*) from venue_amenities where venue_id = (select id from venue where name = 'Bahia Resort') and amenities_id = (select id from amenities where amenity_type = 'BNQTHALL');</sqlCheck>
		</preConditions>
	    <sql>insert into venue_amenities values ((select nextVal('hibernate_sequence')),(select id from venue where name = 'Bahia Resort'), (select id from amenities where amenity_type = 'BNQTHALL'), null, 0, now());</sql>
    </changeSet>
    
    <changeSet author="msingla" id="1.13">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">select count(*) from venue_services where venue_id = (select id from venue where name = 'Bahia Resort') and service_id = (select id from service where service_type = 'DINEIN');</sqlCheck>
		</preConditions>
	    <sql>insert into venue_services values ((select nextVal('hibernate_sequence')),(select id from venue where name = 'Bahia Resort'), (select id from service where service_type = 'DINEIN'), null, 0, now());</sql>
    </changeSet>
    
</databaseChangeLog>